<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="sorting.css">
    <link rel="stylesheet" href="prism.css">
    <link rel="shortcut icon" href="../sv-removebg-preview.png" type="image/x-icon">
    <title>Sorting Visualizer</title>
    <style>
        .array-input-container {
            margin: 15px 0;
            text-align: center;
        }
        .array-input {
            padding: 8px 15px;
            width: 300px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }
        .array-submit {
            padding: 8px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .array-submit:hover {
            background-color: #2980b9;
        }
        #swap-count, #compare-count {
            color: black;
            font-weight: bold;
        }
        .bar {
            font-size: 10px; /* Smaller font for small bars */
            min-height: 20px; /* Minimum height to ensure visibility */
        }
    </style>
</head>
<body>
    <section id="fullbody">
        <header>
            <h1 id="name"><a href="sorting.html"><span class="big">S</span>ORTING<span></span></a><a
                    href="sorting.html"><span class="big">V</span>ISUALIZER</a></h1>
            <div class="array-input-container">
                <input type="text" class="array-input" placeholder="Enter numbers separated by commas (e.g., 5,3,8,1)">
                <button class="array-submit">Use This Array</button>
            </div>
            <div id="basic_btn">
                <div class="gen">
                    <div class="dropdown">
                        <button class="select">
                            <div class="selected">Click any Button</div>
                        </button>
                    </div>
                    <div class="generate_new_array">
                        <button id="generate">Generate New Array</button>
                    </div>
                </div>
                <div class="sizespeed">
                    <div class="array_range">
                        <button id="size">Size : <span id="size_value"></span></button>
                        <input type="range" id="size_slider" min="4" max="30" value="15"> <!-- Max changed to 30 -->
                    </div>
                    <div class="array_speed">
                        <button id="speed">Speed : <span id="speed_value"></span></button>
                        <input type="range" id="speed_slider" min="1" max="10" value="5">
                    </div>
                </div>
            </div>
        </header>

        <div id="working_area">
            <div id="stats">
                <div class="stat-item">Swaps: <span id="swap-count">0</span></div>
                <div class="stat-item">Comparisons: <span id="compare-count">0</span></div>
            </div>
            <div id="mainbody"></div>
            <div id="buttons">
                <button class="BubbleSort">Bubble Sort</button>
                <button class="SelectionSort">Selection Sort</button>
                <button class="InsertionSort">Insertion Sort</button>
                <button id="pause" disabled>Pause</button>
                <button id="stop" disabled>Stop</button>
                <a href="../index.html"><ion-icon name="home"></ion-icon></a>
            </div>
        </div>

        <footer>
            <div id="description">
                <div class="code">
                    <div class="selectedPane">
                        <span>Code in (Java)</span>
                    </div>
                    <pre id="code_java">
<code class="language-java">// Java program for implementation of Bubble Sort
import java.util.*;

class BubbleSort {
    void bubbleSort(int arr[])
    {
        int n = arr.length;
        for (int i = 0; i < n - 1; i++)
            for (int j = 0; j < n - i - 1; j++)
                if (arr[j] > arr[j + 1]) {
                    int temp = arr[j];
                    arr[j] = arr[j + 1];
                    arr[j + 1] = temp;
                }
    }
    void printArray(int arr[])
    {
        int n = arr.length;
        for (int i = 0; i < n; ++i)
            System.out.print(arr[i] + " ");
        System.out.println();
    }
    public static void main(String args[])
    {
        BubbleSort ob = new BubbleSort();
        int arr[] = { 5, 1, 4, 2, 8 };
        ob.bubbleSort(arr);
        System.out.println("Sorted array");
        ob.printArray(arr);
    }
} 
</code>
                    </pre>
                </div>
            </div>
        </footer>
    </section>

    <script src="utilities.js"></script>
    <script src="bubble.js"></script>
    <script src="insertion.js"></script>
    <script src="selection.js"></script>
    <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
    <script src="prism.js"></script>
    <script>
        document.querySelector('.array-submit').addEventListener('click', function() {
            const input = document.querySelector('.array-input').value;
            const numbers = input.split(',').map(num => {
                const parsed = parseInt(num.trim());
                return isNaN(parsed) ? 20 : Math.max(1, Math.min(500, parsed)); // Changed min to 1
            });
            
            if (numbers.length > 0) {
                // Limit array size to 30
                const limitedNumbers = numbers.slice(0, 30);
                createCustomArray(limitedNumbers);
                document.getElementById("size_slider").value = limitedNumbers.length;
                document.getElementById("size_value").textContent = limitedNumbers.length;
            }
        });

        function createCustomArray(numbers) {
            stopSorting = true;
            isPaused = false;
            resetStats();
            const mainBody = document.getElementById("mainbody");
            mainBody.innerHTML = "";

            const barWidth = Math.max(20, Math.min(60, (window.innerWidth * 0.8) / numbers.length));

            for (let i = 0; i < numbers.length; i++) {
                const bar = document.createElement("div");
                bar.className = "bar";
                bar.style.height = `${numbers[i]}px`;
                bar.style.width = `${barWidth}px`;
                bar.style.lineHeight = `${numbers[i]}px`;
                bar.textContent = numbers[i];
                
                // Adjust font size for small bars
                if (numbers[i] < 20) {
                    bar.style.fontSize = "8px";
                    bar.style.paddingTop = `${20 - numbers[i]}px`; // Ensure text is visible
                }
                
                mainBody.appendChild(bar);
            }
        }
    </script>
</body>
</html>
